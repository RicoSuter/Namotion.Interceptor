// <auto-generated>
//     This code was generated by Namotion.Interceptor.Generator
// </auto-generated>

using Namotion.Interceptor;
using Namotion.Interceptor.Interceptors;

using System;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Collections.Frozen;
using System.ComponentModel;
using System.Linq;
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Text.Json.Serialization;

#pragma warning disable CS8669
#pragma warning disable CS0649
#pragma warning disable CS0067

namespace YourDefaultNamespace
{
    public partial class Person : IInterceptorSubject, INotifyPropertyChanged, IRaisePropertyChanged
    {
        public event PropertyChangedEventHandler? PropertyChanged;

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        protected void RaisePropertyChanged(string propertyName) => PropertyChanged?.Invoke(this, PropertyChangedEventArgsCache.Get(propertyName));

        void IRaisePropertyChanged.RaisePropertyChanged(string propertyName) => RaisePropertyChanged(propertyName);

        private IInterceptorExecutor? _context;
        private IReadOnlyDictionary<string, SubjectPropertyMetadata>? _properties;

        [JsonIgnore]
        IInterceptorSubjectContext IInterceptorSubject.Context => _context ??= new InterceptorExecutor(this);

        [JsonIgnore]
        ConcurrentDictionary<(string? property, string key), object?> IInterceptorSubject.Data { get; } = new();

        [JsonIgnore]
        global::System.Collections.Generic.IReadOnlyDictionary<string, global::Namotion.Interceptor.SubjectPropertyMetadata> global::Namotion.Interceptor.IInterceptorSubject.Properties =>
            _properties ?? global::Namotion.Interceptor.SubjectPropertyMetadataCache.Get<Person>();

        [JsonIgnore]
        object IInterceptorSubject.SyncRoot { get; } = new object();

        void global::Namotion.Interceptor.IInterceptorSubject.AddProperties(params global::System.Collections.Generic.IEnumerable<global::Namotion.Interceptor.SubjectPropertyMetadata> properties)
        {
            _properties = (_properties ?? global::Namotion.Interceptor.SubjectPropertyMetadataCache.Get<Person>())
                .Concat(properties.Select(p => new global::System.Collections.Generic.KeyValuePair<string, global::Namotion.Interceptor.SubjectPropertyMetadata>(p.Name, p)))
                .ToFrozenDictionary();
        }


        [global::System.ComponentModel.EditorBrowsable(global::System.ComponentModel.EditorBrowsableState.Never)]
        internal static (global::System.Func<global::Namotion.Interceptor.IInterceptorSubject, object?>?, global::System.Action<global::Namotion.Interceptor.IInterceptorSubject, object?>?)
            __GetPropertyAccessors(string name) => name switch
        {
            "FirstName" => (static o => ((Person)o).FirstName, static (o, v) => ((Person)o).FirstName = (string)v!),
            "LastName" => (static o => ((Person)o).LastName, static (o, v) => ((Person)o).LastName = (string)v!),
            _ => (null, null)
        };
        public Person()
        {
        }

        public Person(IInterceptorSubjectContext context) : this()
        {
            ((IInterceptorSubject)this).Context.AddFallbackContext(context);
        }

        private string _FirstName;

        [global::Namotion.Interceptor.Attributes.Intercepted]
        public partial string FirstName
        {
            get
            {
                return GetPropertyValue<string>(nameof(FirstName), static (o) => ((Person)o)._FirstName);
            }
            set
            {
                var newValue = value;
                var cancel = false;
                OnFirstNameChanging(ref newValue, ref cancel);
                if (!cancel && SetPropertyValue(nameof(FirstName), newValue, static (o) => ((Person)o)._FirstName, static (o, v) => ((Person)o)._FirstName = v))
                {
                    OnFirstNameChanged(_FirstName);
                    RaisePropertyChanged(nameof(FirstName));
                }
            }
        }

        partial void OnFirstNameChanging(ref string newValue, ref bool cancel);

        partial void OnFirstNameChanged(string newValue);

        private string _LastName;

        [global::Namotion.Interceptor.Attributes.Intercepted]
        public partial string LastName
        {
            get
            {
                return GetPropertyValue<string>(nameof(LastName), static (o) => ((Person)o)._LastName);
            }
            set
            {
                var newValue = value;
                var cancel = false;
                OnLastNameChanging(ref newValue, ref cancel);
                if (!cancel && SetPropertyValue(nameof(LastName), newValue, static (o) => ((Person)o)._LastName, static (o, v) => ((Person)o)._LastName = v))
                {
                    OnLastNameChanged(_LastName);
                    RaisePropertyChanged(nameof(LastName));
                }
            }
        }

        partial void OnLastNameChanging(ref string newValue, ref bool cancel);

        partial void OnLastNameChanged(string newValue);

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        private TProperty GetPropertyValue<TProperty>(string propertyName, Func<IInterceptorSubject, TProperty> readValue)
        {
            return _context is not null ? _context.GetPropertyValue(propertyName, readValue)! : readValue(this)!;
        }

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        private bool SetPropertyValue<TProperty>(string propertyName, TProperty newValue, Func<IInterceptorSubject, TProperty> readValue, Action<IInterceptorSubject, TProperty> setValue)
        {
            if (_context is null)
            {
                setValue(this, newValue);
                return true;
            }
            else
            {
                return _context.SetPropertyValue(propertyName, newValue, readValue, setValue);
            }
        }

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        private object? InvokeMethod(string methodName, Func<IInterceptorSubject, object?[], object?> invokeMethod, params object?[] parameters)
        {
            return _context is not null ? _context.InvokeMethod(methodName, parameters, invokeMethod) : invokeMethod(this, parameters);
        }
    }
}


// <auto-generated>
//     This code was generated by Namotion.Interceptor.Generator
// </auto-generated>

using Namotion.Interceptor;
using Namotion.Interceptor.Interceptors;

using System;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Collections.Frozen;
using System.ComponentModel;
using System.Linq;
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Text.Json.Serialization;

#pragma warning disable CS8669
#pragma warning disable CS0649
#pragma warning disable CS0067

namespace YourDefaultNamespace
{
    public partial class Teacher : IInterceptorSubject
    {
        private IInterceptorExecutor? _context;
        private IReadOnlyDictionary<string, SubjectPropertyMetadata>? _properties;

        [JsonIgnore]
        IInterceptorSubjectContext IInterceptorSubject.Context => _context ??= new InterceptorExecutor(this);

        [JsonIgnore]
        ConcurrentDictionary<(string? property, string key), object?> IInterceptorSubject.Data { get; } = new();

        [JsonIgnore]
        global::System.Collections.Generic.IReadOnlyDictionary<string, global::Namotion.Interceptor.SubjectPropertyMetadata> global::Namotion.Interceptor.IInterceptorSubject.Properties =>
            _properties ?? global::Namotion.Interceptor.SubjectPropertyMetadataCache.Get<Teacher>();

        [JsonIgnore]
        object IInterceptorSubject.SyncRoot { get; } = new object();

        void global::Namotion.Interceptor.IInterceptorSubject.AddProperties(params global::System.Collections.Generic.IEnumerable<global::Namotion.Interceptor.SubjectPropertyMetadata> properties)
        {
            _properties = (_properties ?? global::Namotion.Interceptor.SubjectPropertyMetadataCache.Get<Teacher>())
                .Concat(properties.Select(p => new global::System.Collections.Generic.KeyValuePair<string, global::Namotion.Interceptor.SubjectPropertyMetadata>(p.Name, p)))
                .ToFrozenDictionary();
        }


        [global::System.ComponentModel.EditorBrowsable(global::System.ComponentModel.EditorBrowsableState.Never)]
        internal static new (global::System.Func<global::Namotion.Interceptor.IInterceptorSubject, object?>?, global::System.Action<global::Namotion.Interceptor.IInterceptorSubject, object?>?)
            __GetPropertyAccessors(string name) => name switch
        {
            "MainCourse" => (static o => ((Teacher)o).MainCourse, static (o, v) => ((Teacher)o).MainCourse = (string)v!),
            _ => (null, null)
        };
        public Teacher()
        {
        }

        public Teacher(IInterceptorSubjectContext context) : this()
        {
            ((IInterceptorSubject)this).Context.AddFallbackContext(context);
        }

        private string _MainCourse;

        [global::Namotion.Interceptor.Attributes.Intercepted]
        public partial string MainCourse
        {
            get
            {
                return GetPropertyValue<string>(nameof(MainCourse), static (o) => ((Teacher)o)._MainCourse);
            }
            set
            {
                var newValue = value;
                var cancel = false;
                OnMainCourseChanging(ref newValue, ref cancel);
                if (!cancel && SetPropertyValue(nameof(MainCourse), newValue, static (o) => ((Teacher)o)._MainCourse, static (o, v) => ((Teacher)o)._MainCourse = v))
                {
                    OnMainCourseChanged(_MainCourse);
                    RaisePropertyChanged(nameof(MainCourse));
                }
            }
        }

        partial void OnMainCourseChanging(ref string newValue, ref bool cancel);

        partial void OnMainCourseChanged(string newValue);

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        private TProperty GetPropertyValue<TProperty>(string propertyName, Func<IInterceptorSubject, TProperty> readValue)
        {
            return _context is not null ? _context.GetPropertyValue(propertyName, readValue)! : readValue(this)!;
        }

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        private bool SetPropertyValue<TProperty>(string propertyName, TProperty newValue, Func<IInterceptorSubject, TProperty> readValue, Action<IInterceptorSubject, TProperty> setValue)
        {
            if (_context is null)
            {
                setValue(this, newValue);
                return true;
            }
            else
            {
                return _context.SetPropertyValue(propertyName, newValue, readValue, setValue);
            }
        }

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        private object? InvokeMethod(string methodName, Func<IInterceptorSubject, object?[], object?> invokeMethod, params object?[] parameters)
        {
            return _context is not null ? _context.InvokeMethod(methodName, parameters, invokeMethod) : invokeMethod(this, parameters);
        }
    }
}
